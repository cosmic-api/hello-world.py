<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Hello-world.py by cosmic-api</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Hello-world.py</h1>
          <h2>Example API using Cosmic</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/cosmic-api/hello-world.py/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/cosmic-api/hello-world.py/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/cosmic-api/hello-world.py" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>What is Cosmic?</h3>

          <p>
            Cosmic is a high-level framework for crafting web APIs.
            Please checkout our <a href="https://www.cosmic-api.com">homepage</a>.
            This page gives you line by line explanation on how Cosmic APIs work.
            Instructions on how to run this example can be found on <a href="https://github.com/cosmic-api/hello-world.py">GitHub project</a>.
          </p>

          <h3>Import Cosmic and create new API</h3>

          <pre><code>
1: from cosmic.api import API
2:
3: # Define name of the API
4: api = API('cosmic_hello_world', 'http://localhost:8080')
          </code></pre>

          <p>
            <code>API</code> class is used to create new instance of Cosmic API.
            First parameter is the name of the API, and it's required.
            Second parameter is the URL of the API.(this is optional) (edit me later)
          </p>
          
          <pre><code>
# Set of people
people = set()
          </code></pre>
          
          <p>Place to hold set of names.</p>
          
          <h3>Setup Actions</h3>
          
          <h4><code>remember_me</code> action</h4>
          
          <pre><code>
@api.action(
  accepts={"type": "string"},
  returns={"type": "string"}
)
          </code></pre>
 
          <p>
            Here we are declaring that this function will take a single <code>string</code> parameter,
            and it'll return a <code>string</code> as well.
          </p>
          
          <pre><code>
def remember_me(name):
  """Remember someone upto 10 people.
  """
  if name not in people:
    # Too many people to remember!
    if len(people) >= 10:
      people.pop()
    # Add new person
    people.add(name)
    return "Hello, %s! I'll remember you." % name
  else:
    return "Welcome back, %s." % name
          </code></pre>
          
          <p>
            The actual function itself. Note that it takes in regular python <code>&lt;type 'str'&gt;</code>.
            Cosmic takes care of type conversions automatically, using <code>accepts</code> schema defined above.
          </p>
          <p>
            What is happening under the hood is that HTTP request with JSON body data is parsed, validated, and normalized to python's native <code>str</code> type.
          </p>
          <p>
            The return value also goes through same process as well, except in reversed order.
            The native <code>str</code> is serialized into JSON, based on <code>returns</code> schema.
          </p>

        </section>

        <footer>
          Hello-world.py is maintained by <a href="https://github.com/cosmic-api">cosmic-api</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
